<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<title>org.archive.io.arc package</title>
</head>
<body>
Experimental WARC Writer and Readers.  Code and specification subject to change.
Code implemented against (unreleased?)
<a href="http://archive-access.sourceforge.net/warc/warc_file_format.html">The WARC File Format (Version 0.9)</a>.
<h2>Implementation Notes</h2>
<h3>Suggested Spec. Amendments</h3>
<h4>Drop response record type</h4>
<p><code>resource</code> is sufficent. Let mimetype distingush if capture with response
headers or not.</p>
<h4>mimetype in header line</h4>
<p>Lets change spec so proper mimetypes are allowed as per RFC2045 rather than
our current shriveled definition. Let mimetypes have parameters allowing 
space between subtype and first parameter and that parameter
values themselves might include spaces ('quoted-string'). Parse is easy
especially considering position in header line, second to last, just before 
record-id URI (Would be easier if mimetype were last -- easier to implement
and easier to document in spec).  Would allow full exploitation of mime type.
Otherwise, parsers need to read mime + custom named field or metadata.</p>  
<p>If we allow original mimetype, then using mimetype 'naturally', we leave
ourselves open to recording of the following scenarios without amendment to
the spec:
</p>
<p>
<ul>
<li>Consider the case where an archiving organization would store all
related to a capture as one record with a mimetype of 
<code>multipart/mixed; boundary=RECORD-ID</code> and into this record they'd
write parts <code>Content-Type: application/http; msgtype=request</code>,
<code>Content-Type: application/http; msgtype=response</code>, and
<code>Content-Type: text/xml+rdf</code> (For metadata).
</li>
<li>Or, an archiving institution would store a capture with 'alternatives'
(perhaps ranging from <code>basic/plain</code> (or 'desiccated' in Kunze-speak) -- perhaps a <code>text/plain</code> rendition of a PDF capture -- through to
<code>best</code>, the actual PDF binary itself.
</li>
</ul>
</p>
<h4>Allow multiple instances of a single Named Parameter</h4>
<p>Allow that there may be multiple instances of same Named Parameter. Spec.
is currently silent on this. E.g. Multiple <code>Related-Record-ID</code>s
could prove of use.

<h2>TODOs</h2>
<ul>
<li>Should we allow freeform creation of custom named fields if
have a 'X-' or somesuch prefix?
</li>
<li>Section 6. truncated?</li>
<li>Section 7, on truncation, on 7.1, suggest values but allow free form description?
Leave off 'superior method of indicating truncation' paragraph.  This qualifier
could be added to all sections of doc. -- that a subsequent revision will have
a superior means. Rather than <code>End-Length</code>, like MIME, last record could have
<code>Segment-Number-Total</code>, a count of all segments that make up complete 
record.
</li>
<li>Nothing on header-line encoding. For completeness should be US-ASCII
(UTF-8?), no control-chars or CR or LF, etc.</li>
<li>In-line ANVL definition (From Kunze).  Related, can labels have
CTLs such as CRLF (Shouldn't)?  When says 'control-chars', does this include
UNICODE control characters (Should)? CHAR is described as ASCII/UTF-8 but they
are not same (Should be UTF-8)</li>
<li>unit tests using <code>multipart/*</code> (JavaMail) reading and writing
records? Try <code>record-id</code> as part boundary.
</li>
<li>Fix ambiguity in spec. pertaining to 'smallest possible anvl-fields' notcited by Mads Alhof Kristiansen in <a 
href="ftp://ftp.diku.dk/diku/semantics/papers/D-548.pdf">Digital Preservation
using the WARC File Format</a>.
</li>
<li><b>warcinfo</b>
<ul><li>What for a scheme?  Spec. is lacking.  DK used 'file' for
a 'resource'.  Am using 'data' with value of ARC filename.
</li>
<li>I don't want to repeat for every WARC. How to have this warcinfo point at
an original?  <code>related-record-id</code> seems insufficent.
</li>
<li>If the crawler config. changes, can I just write a warcinfo with
differences?  How to express?  Or better as metadata about a warcinfo?
</li>
</ul>
</li>
</ul>
</body>
</html>
